openapi: 3.0.0
info:
  title: Lotlytics OpenAPI Documentation
  version: v1.0.0
  description: |
    The **Lotlytics API** is a RESTful service that provides programmatic access 
    to the resources and data used by the Lotlytics platform.
  
    It is organized around several primary endpoints:
      - **/lot** — Manage and retrieve parking lot resources.
      - **/group** — Access and manage parking lot group resources.
      - **/group/member** — Manage group members and their roles.
      - **/role** — Manage roles that can be assigned to group members.
      - **/event** — Create, and record event data.
  
    All endpoints follow RESTful principles and are stateless, ensuring 
    predictable, consistent, and scalable interactions.
    
servers:
  - url: http://localhost:6600
    description: Generated server url
paths:
  /api/v1/lot:
    get:
      tags:
        - /lot
      operationId: getAllLots
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: lotId
          in: query
          required: false
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Successfully retrieved list of lots
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/LotArray'
                  - $ref: '#/components/schemas/Lot'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    put:
      tags:
        - /lot
      operationId: putLot
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: lotId
          in: query
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutLotPayload'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lot'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    post:
      tags:
        - /lot
      operationId: postLot
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLotPayload'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lot'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    delete:
      tags:
        - /lot
      operationId: deleteAllLots
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: lotId
          in: query
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: Lot deleted
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
          
  /api/v1/group:
    get:
      tags:
        - /group
      operationId: getAllGroups
      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successfully retrieved list of groups
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/GroupArray'
                  - $ref: '#/components/schemas/Group'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    post:
      tags:
        - /group
      operationId: createGroup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupPayload'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    delete:
      tags:
        - /group
      operationId: deleteGroup
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Group deleted
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
  /api/v1/group/member:
    get:
      tags:
        - /group
      operationId: getGroupMembers
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successfully retrieved list of group members
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMemberArray'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    post:
      tags:
        - /group
      operationId: createGroupMember
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupMemberPayload'
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMember'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
        '409':
          description: Conflict — The user is already a member of the group
    put:
      tags:
        - /group
      operationId: putGroupMember
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: userId
          in: query
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutGroupMemberPayload'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMember'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    delete:
      tags:
        - /group
      operationId: deleteGroupMember
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: userId
          in: query
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: Group member deleted
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
  /api/v1/role:
    get:
      tags:
        - /role
      operationId: getRoles
      parameters:
        - name: name
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successfully retrieved list of roles
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/RoleArray'
                  - $ref: '#/components/schemas/Role'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    post:
      tags:
        - /role
      operationId: createRole
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRolePayload'
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '409':
          description: Conflict — A role with the same name already exists
    delete:
      tags:
        - /role
      operationId: deleteRole
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: Role deleted
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
  /api/v1/event:
    get:
      tags:
        - /event
      operationId: getGroupEvents
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: lotId
          in: query
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Successfully retrieved list of events
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/EventArray'
                  - $ref: '#/components/schemas/Event'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
    post:
      tags:
        - /event
      operationId: createLotEvent
      parameters:
        - name: groupId
          in: query
          required: true
          schema:
            type: string
        - name: lotId
          in: query
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEventPayload'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          description: Bad Request — The request was invalid or missing required parameters.
        '404':
          description: Not Found — The requested resource could not be found
  /api/v1:
    get:
      tags:
        - Debugging
      operationId: index
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
components:
  schemas:
    LotArray:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            description: The unique identifier for the lot.
            example: 1
          name:
            type: string
            description: The name of the lot.
            example: "Downtown Garage"
          groupId:
            type: string
            description: The ID of the group this lot belongs to.
            example: "city-lots-3erdfga0"
          currentVolume:
            type: integer
            description: The current volume used in the lot.
            example: 45
          capacity:
            type: integer
            description: The maximum capacity of the lot.
            example: 100
          createdAt:
            type: string
            format: date-time
            description: The timestamp when the lot was created.
            example: "2025-10-11T14:23:00Z"
          updatedAt:
            type: string
            format: date-time
            description: The timestamp of the last update to the lot.
            example: "2025-10-11T17:45:00Z"
    Lot:
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier for the lot.
          example: 1
        name:
          type: string
          description: The name of the lot.
          example: "Downtown Garage"
        groupId:
          type: string
          description: The ID of the group this lot belongs to.
          example: "GRP-001"
        currentVolume:
          type: integer
          description: The current volume used in the lot.
          example: 45
        capacity:
          type: integer
          description: The maximum capacity of the lot.
          example: 100
        street:
          type: string
          description: The street the parking lot is on.
          example: "123 Main Street"
        city:
          type: string
          description: The city the parking lot is in.
          example: "Newark"
        state:
          type: string
          description: The state the parking lot is in.
          example: "New Jersey"
        zip:
          type: string
          description: The zip code the parking lot is in.
          example: "07102"
        createdAt:
          type: string
          format: date-time
          description: The timestamp when the lot was created.
          example: "2025-10-11T14:23:00Z"
        updatedAt:
          type: string
          format: date-time
          description: The timestamp of the last update to the lot.
          example: "2025-10-11T17:45:00Z"    
    PutLotPayload:
      type: object
      properties:
        name:
          type: string
          maxLength: 255
          minLength: 0
        capacity:
          type: integer
          format: int32
        volume:
          type: integer
          format: int32
    CreateLotPayload:
      type: object
      properties:
        name:
          type: string
          maxLength: 255
          minLength: 0
        capacity:
          type: integer
          format: int32
        volume:
          type: integer
          format: int32
        street:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 255
        state:
          type: string
          maxLength: 255
        zip:
          type: string
          maxLength: 255
    CreateGroupPayload:
      type: object
      properties:
        name:
          type: string
          maxLength: 246
          minLength: 0
    CreateEventPayload:
      type: object
      properties:
        value:
          type: integer
          format: int32
        capturedAt:
          type: string
    Message:
      type: object
      properties:
        content:
          type: string
    GroupArray:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: The unique identifier for the group. Primary key in the database.
            example: "city-lots-3erdfga0"
          name:
            type: string
            description: The name of the group.
            example: "Downtown Parking Group"
        required:
          - id
    Group:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier for the group. Primary key in the database.
          example: "city-lots-3erdfga0"
        name:
          type: string
          description: The name of the group.
          example: "Downtown Parking Group"
      required:
        - id
    EventArray:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: The unique identifier for the event. Primary partition key in DynamoDB.
            example: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
          lotId:
            type: integer
            description: The lot ID associated with this event.
            example: 12
          groupId:
            type: string
            description: The group ID associated with this event.
            example: "city-lots-3erdfga0"
          value:
            type: integer
            description: The numeric value of the event (e.g., 1 or -1).
            example: 1
          capturedAt:
            type: string
            format: date-time
            description: The timestamp when the event was captured.
            example: "2025-10-11T18:42:00Z"
        required:
          - id
          - lotId
          - groupId
          - value
          - capturedAt
    Event:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier for the event. Primary partition key in DynamoDB.
          example: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
        lotId:
          type: integer
          description: The lot ID associated with this event.
          example: 12
        groupId:
          type: string
          description: The group ID associated with this event.
          example: "city-lots-3erdfga0"
        value:
          type: integer
          description: The numeric value of the event (e.g., 1 or -1).
          example: 1
        capturedAt:
          type: string
          format: date-time
          description: The timestamp when the event was captured.
          example: "2025-10-11T18:42:00Z"
      required:
        - id
        - lotId
        - groupId
        - value
        - capturedAt
    CreateGroupMemberPayload:
      type: object
      required:
        - userId
        - roleId
      properties:
        userId:
          type: integer
          format: int32
          description: The ID of the user to add as a group member.
          example: 1
        roleId:
          type: integer
          format: int32
          description: The ID of the role to assign to the user.
          example: 2
    PutGroupMemberPayload:
      type: object
      required:
        - roleId
      properties:
        roleId:
          type: integer
          format: int32
          description: The ID of the role to assign to the user.
          example: 2
    GroupMemberArray:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            description: The unique identifier for the group member. Primary key in the database.
            example: 1
          groupId:
            type: string
            description: The ID of the group this member belongs to.
            example: "city-lots-3erdfga0"
          userId:
            type: integer
            description: The ID of the user who is a member of the group.
            example: 1
          roleId:
            type: integer
            description: The ID of the role assigned to this user in the group.
            example: 2
        required:
          - id
          - groupId
          - userId
          - roleId
    GroupMember:
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier for the group member. Primary key in the database.
          example: 1
        groupId:
          type: string
          description: The ID of the group this member belongs to.
          example: "city-lots-3erdfga0"
        userId:
          type: integer
          description: The ID of the user who is a member of the group.
          example: 1
        roleId:
          type: integer
          description: The ID of the role assigned to this user in the group.
          example: 2
      required:
        - id
        - groupId
        - userId
        - roleId
    CreateRolePayload:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 255
          description: The name of the role.
          example: "Administrator"
    RoleArray:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            description: The unique identifier for the role. Primary key in the database.
            example: 1
          name:
            type: string
            description: The name of the role.
            example: "Administrator"
          createdAt:
            type: string
            format: date-time
            description: The timestamp when the role was created.
            example: "2025-10-11T14:23:00Z"
        required:
          - id
          - name
    Role:
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier for the role. Primary key in the database.
          example: 1
        name:
          type: string
          description: The name of the role.
          example: "Administrator"
        createdAt:
          type: string
          format: date-time
          description: The timestamp when the role was created.
          example: "2025-10-11T14:23:00Z"
      required:
        - id
        - name